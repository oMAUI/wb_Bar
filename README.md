# wb_Bar

через jwt {
    /me {
        парсится jwt идет проврка на роль,
        если не посетитель ошибка unauth 401

        получаем данные посетителя,
        в базе хранится время последней покупки напитка,
        обновляем промилле(вычитаем из нынешнего времени время послед
        покупки)
        смотрим жив ли пользователь(если нет ошибка unauth)

        возвращаем данные
    }
    /buy{
        парсим jwt смотрим роль(если не посетитель ошибка unauth)
        получаем данные посетителя,

        в базе хранится время последней покупки напитка,
        обновляем промилле(вычитаем из нынешнего времени время послед
        покупки)

        смотрим есть ли напиток в списке напитков(если нет ошибка 400)

        покупаем напиток (если нет денег или промилле больше 6,
        возвращается соответственная ошибка).
        если умер обновляем статус живности в базе и выходим

        обновляем данные в базе

        возвращаем пользователя
    }
    /create {
        парсим jwt смотрим роль(если не бармен ошибка)

        парсим тело запроса в структуру drink
        если список напиток содержит такой напиток ошибка 400

        добавляем напиток в базу
        обновляем на список(типо кэша чтобы каждый раз не обращаться к базе)
    }
    /list {
        парсим jwt и через switch-case смотрим role
        case barman:
            просто возвращаем список напитков
        case visitor:
            получаем данные из базы
            смотрим жив ли посетитель
            выводим список листов которые меньше чем visitor.Money
    }
}